사물인터넷협회 교육 정리자료 전달드립니다.





★용어정리
ㅇIntel Edison : 인텔社의 사물인터넷 장치의 SoC Module 및 Platform
(Intel® Edison module is a SoC (System on Chip) that includes an Intel® Atom™ 500MHz dual-core, dual-threaded CPU and an Intel® Quark™ 100MHz microcontroller)

ㅇHadoop : 빅데이터 오픈소스 기반 분산처리기술 프로젝트
- 대용량 파일을 저장가능한 분산 파일시스템(HDFS, Hadoop distributed file system) 제공

ㅇOPKG : 임베디드 리눅스 디바이스에서 사용되는 ipkg를 기초로 한 경량 패키지 관리 시스템

ㅇYocto : 임베디드 리눅스 개발자를 위한 오픈소스 프로젝트
ㅇYocto Linux : 임베디드 디바이스(ex. Android)를 위한 리눅스
________________________________________

■ edison 정보(설정 한 상태)
ㅇSerial Port Speed : 115200
ㅇhostname : skt1110810
ㅇroot계정 : root / 12345678
ㅇWifi : helloap / 12345678
ㅇ서버 ip : 192.168.43.146:80 / index.html

■ edison 명령어(CLI)
configure_edison --name
configure_edison --password
configure_edison --wifi

ㅇ테스트 접속 : /usr/lib/edison_config_tools#


■ setup을 위해 실행한 linux 명령어
ㅇcompile : gcc -o world hello.c
ㅇnetstat -anp


■ python 명령어
ㅇ진입 : python
ㅇ종료 : exit(), quit()
ㅇPrint : print "@"
1+2


■ Edison bluetooth on (Master 동작)
root@skt1110810:/etc# rfkill list
0: phy0: wlan
        Soft blocked: no
        Hard blocked: no
1: brcmfmac-wifi: wlan
        Soft blocked: no
        Hard blocked: no
2: bcm43xx Bluetooth: bluetooth
        Soft blocked: yes
        Hard blocked: no

ㅇBLUETOOTH PAIRING
root@skt1110810:/etc# rfkill unblock bluetooth
root@skt1110810:/etc# bluetoothctl 
[NEW] Controller 58:A8:39:01:45:C9 skt1110810 [default]
[bluetooth]# agent KeyboardDisplay
[bluetooth]# default-agent
[bluetooth]# scan on
[bluetooth]# pair AC:EE:9E:F1:FA:DC
[agent] Confirm passkey 684666 (yes/no): yes


■ Edison bluetooth on (Slave로 동작)
spp.py 파일 생성
root@skt1110810:/iot# python spp.py &     // & : 백그라운드에서 실행

root@skt1110810:/iot# bluetoothctl
[NEW] Controller 58:A8:39:01:45:C9 skt1110810 [default]
[NEW] Device AC:EE:9E:F1:FA:DC Galaxy Note5
[bluetooth]# trust AC:EE:9E:F1:FA:DC
[CHG] Device AC:EE:9E:F1:FA:DC Trusted: yes
Changing AC:EE:9E:F1:FA:DC trust succeeded
[bluetooth]# discoverable on
Changing discoverable on succeeded
[CHG] Controller 58:A8:39:01:45:C9 Discoverable: yes


■ Loop Device mount & 압축해제 & lib로 파일 이동 & service 생성
mkdir /update
losetup -o 8192 /dev/loop0 /dev/disk/by-partlabel/update
mount /dev/loop0 /update
cd /update
cp bluetooth-service.tar.gz /home/root/bluetooth/
cd /home/root/bluetooth/
tar zxvf bluetooth-service.tar.gz

cp bluetooth-spp-pin.service /lib/systemd/system
cd /lib/systemd/system

systemctl enable bluetooth-spp-pin
reboot

■ WPA : Linux에서 WiFi Manager
root@skt1110810:~# wpa_cli

> status
bssid=96:76:b7:3a:4c:d5
ssid=helloap
id=0
mode=station
pairwise_cipher=CCMP
group_cipher=CCMP
key_mgmt=WPA2-PSK
wpa_state=COMPLETED
ip_address=192.168.43.75
p2p_device_address=92:b6:86:01:c6:81
address=90:b6:86:01:c6:81

>scan
>scan_result

>list_networks
>add_network
>set_network 3 ssid "helloap"
>set_network 3 psk "12345678"

>select_network 3
OK
<3>CTRL-EVENT-DISCONNECTED bssid=96:76:b7:3a:4c:d5 reason=3 locally_generated=1
<3>CTRL-EVENT-SCAN-RESULTS
<3>WPS-AP-AVAILABLE
<3>Trying to associate with 96:76:b7:3a:4c:d5 (SSID='helloap' freq=2412 MHz)
<3>Associated with 96:76:b7:3a:4c:d5
<3>WPA: Key negotiation completed with 96:76:b7:3a:4c:d5 [PTK=CCMP GTK=CCMP]
<3>CTRL-EVENT-CONNECTED - Connection to 96:76:b7:3a:4c:d5 completed (auth) [id=3 id_str=]

■ Linux에서 WiFi 명령어
root@skt1110810:~# iwconfig      // configure a wireless network interface


■ ubidots 연동 : http://help.ubidots.com/connect-your-devices/connect-your-intel-edison-to-ubidots-using-python-and-mraa-library 참고
vi /etc/opkg/base-feeds.conf
(사이트의 3개 입력) 
opkg update
opkg install libmraa0 nano
opkg install git
curl -k -O https://bootstrap.pypa.io/get-pip.py
 python get-pip.py
pip install ubidots
vi ubidots_start.py
(vi 편집)
python ubidots_start.py


________________________________________
<profile 정보>
■ WiFi 정보
wlan0     Link encap:Ethernet  HWaddr 90:b6:86:01:c6:81
          inet addr:192.168.43.75  Bcast:192.168.43.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:108 errors:0 dropped:0 overruns:0 frame:0
          TX packets:99 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:11627 (11.3 KiB)  TX bytes:18512 (18.0 KiB)

■ My Phone Bluetooth 
[bluetooth]# info AC:EE:9E:F1:FA:DC
Device AC:EE:9E:F1:FA:DC
        Name: Galaxy Note5
        Alias: Galaxy Note5
        Class: 0x5a020c
        Icon: phone
        Paired: yes
        Trusted: no
        Blocked: no
        Connected: no
        LegacyPairing: no
        UUID: OBEX Object Push          (00001105-0000-1000-8000-00805f9b34fb)
        UUID: Audio Source              (0000110a-0000-1000-8000-00805f9b34fb)
        UUID: A/V Remote Control Target (0000110c-0000-1000-8000-00805f9b34fb)
        UUID: Headset AG                (00001112-0000-1000-8000-00805f9b34fb)
        UUID: PANU                      (00001115-0000-1000-8000-00805f9b34fb)
        UUID: NAP                       (00001116-0000-1000-8000-00805f9b34fb)
        UUID: Handsfree Audio Gateway   (0000111f-0000-1000-8000-00805f9b34fb)
        UUID: Phonebook Access Server   (0000112f-0000-1000-8000-00805f9b34fb)
        UUID: Message Access Server     (00001132-0000-1000-8000-00805f9b34fb)
        UUID: PnP Information           (00001200-0000-1000-8000-00805f9b34fb)
        UUID: Generic Access Profile    (00001800-0000-1000-8000-00805f9b34fb)
        UUID: Generic Attribute Profile (00001801-0000-1000-8000-00805f9b34fb)
        Modalias: bluetooth:v0075p0100d0200


■ Edison Bluetooth 
[bluetooth]# show
Controller 58:A8:39:01:45:C9
        Name: skt1110810
        Alias: skt1110810
        Class: 0x2c0110
        Powered: yes
        Discoverable: no
        Pairable: yes
        UUID: PnP Information           (00001200-0000-1000-8000-00805f9b34fb)
        UUID: Generic Access Profile    (00001800-0000-1000-8000-00805f9b34fb)
        UUID: Generic Attribute Profile (00001801-0000-1000-8000-00805f9b34fb)
        UUID: A/V Remote Control        (0000110e-0000-1000-8000-00805f9b34fb)
        UUID: A/V Remote Control Target (0000110c-0000-1000-8000-00805f9b34fb)
        UUID: Handsfree                 (0000111e-0000-1000-8000-00805f9b34fb)
        UUID: Audio Source              (0000110a-0000-1000-8000-00805f9b34fb)
        UUID: Audio Sink                (0000110b-0000-1000-8000-00805f9b34fb)
        Modalias: usb:v1D6Bp0246d0518
        Discovering: no


■ ubidots
ㅇtoken : 2h1fF9LUlcfhc0cQJGfuVbhsjDdY0k

ㅇRollSensor : 58f8493f762542304c9006ae
ㅇLightSensor : 58f849467625423050906169
ㅇLEDSensor : 58f8622a762542304e2550f7
