[root@it-was gclogs]# jmap -heap 3398
Attaching to process ID 3398, please wait...
Debugger attached successfully.
Server compiler detected.
JVM version is 25.144-b01

using thread-local object allocation.
Mark Sweep Compact GC

Heap Configuration:
   MinHeapFreeRatio         = 40
   MaxHeapFreeRatio         = 70
   MaxHeapSize              = 134217728 (128.0MB)
   NewSize                  = 44695552 (42.625MB)
   MaxNewSize               = 44695552 (42.625MB)
   OldSize                  = 89522176 (85.375MB)
   NewRatio                 = 2
   SurvivorRatio            = 8
   MetaspaceSize            = 21807104 (20.796875MB)
   CompressedClassSpaceSize = 1073741824 (1024.0MB)
   MaxMetaspaceSize         = 17592186044415 MB
   G1HeapRegionSize         = 0 (0.0MB)

Heap Usage:
New Generation (Eden + 1 Survivor Space):
   capacity = 40239104 (38.375MB)
   used     = 9751696 (9.299942016601562MB)
   free     = 30487408 (29.075057983398438MB)
   24.234376590492673% used
Eden Space:
   capacity = 35782656 (34.125MB)
   used     = 5295256 (5.049949645996094MB)
   free     = 30487400 (29.075050354003906MB)
   14.798387241014193% used
From Space:
   capacity = 4456448 (4.25MB)
   used     = 4456440 (4.249992370605469MB)
   free     = 8 (7.62939453125E-6MB)
   99.99982048483456% used
To Space:
   capacity = 4456448 (4.25MB)
   used     = 0 (0.0MB)
   free     = 4456448 (4.25MB)
   0.0% used
tenured generation:
   capacity = 89522176 (85.375MB)
   used     = 11106736 (10.592208862304688MB)
   free     = 78415440 (74.78279113769531MB)
   12.40668680797035% used

11734 interned Strings occupying 1702048 bytes.

[root@it-was gclogs]# jstat -gcutil 3398
  S0     S1     E      O      M     CCS    YGC     YGCT    FGC    FGCT     GCT
100.00   0.00  42.92  12.41  96.82  94.35      2    0.044     0    0.000    0.044

[root@it-was logs]# jstat -gccapacity 3398
 NGCMN    NGCMX     NGC     S0C   S1C       EC      OGCMN      OGCMX       OGC         OC       MCMN     MCMX      MC     CCSMN    CCSMX     CCSC    YGC    FGC
 43648.0  43648.0  43648.0 4352.0 4352.0  34944.0    87424.0    87424.0    87424.0    87424.0      0.0 1064960.0  16512.0      0.0 1048576.0   1920.0      2     0


[root@it-was gclogs]# cat song-gc.log
Java HotSpot(TM) 64-Bit Server VM (25.144-b01) for linux-amd64 JRE (1.8.0_144-b01), built on Jul 21 2017 21:57:33 by "java_re" with gcc 4.3.0 20080428 (Red Hat 4.3.0-8)
Memory: 4k page, physical 1016344k(611260k free), swap 1679356k(1679356k free)
CommandLine flags: -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/root/tomcat/gclogs/song-java_pid.hprof -XX:InitialHeapSize=134217728 -XX:MaxHeapSize=134217728 -XX:+PrintGC -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+PrintHeapAtGC -XX:+UseCompressedClassPointers -XX:+UseCompressedOops
{Heap before GC invocations=0 (full 0):
 def new generation   total 39296K, used 34944K [0x00000000f8000000, 0x00000000faaa0000, 0x00000000faaa0000)
  eden space 34944K, 100% used [0x00000000f8000000, 0x00000000fa220000, 0x00000000fa220000)
  from space 4352K,   0% used [0x00000000fa220000, 0x00000000fa220000, 0x00000000fa660000)
  to   space 4352K,   0% used [0x00000000fa660000, 0x00000000fa660000, 0x00000000faaa0000)
 tenured generation   total 87424K, used 0K [0x00000000faaa0000, 0x0000000100000000, 0x0000000100000000)
   the space 87424K,   0% used [0x00000000faaa0000, 0x00000000faaa0000, 0x00000000faaa0200, 0x0000000100000000)
 Metaspace       used 13516K, capacity 13762K, committed 13952K, reserved 1060864K
  class space    used 1530K, capacity 1588K, committed 1664K, reserved 1048576K
1.278: [GC (Allocation Failure) 1.278: [DefNew: 34944K->4352K(39296K), 0.0270999 secs] 34944K->9752K(126720K), 0.0272108 secs] [Times: user=0.03 sys=0.01, real=0.03 secs]
Heap after GC invocations=1 (full 0):
 def new generation   total 39296K, used 4352K [0x00000000f8000000, 0x00000000faaa0000, 0x00000000faaa0000)
  eden space 34944K,   0% used [0x00000000f8000000, 0x00000000f8000000, 0x00000000fa220000)
  from space 4352K, 100% used [0x00000000fa660000, 0x00000000faaa0000, 0x00000000faaa0000)
  to   space 4352K,   0% used [0x00000000fa220000, 0x00000000fa220000, 0x00000000fa660000)
 tenured generation   total 87424K, used 5400K [0x00000000faaa0000, 0x0000000100000000, 0x0000000100000000)
   the space 87424K,   6% used [0x00000000faaa0000, 0x00000000fafe6290, 0x00000000fafe6400, 0x0000000100000000)
 Metaspace       used 13516K, capacity 13762K, committed 13952K, reserved 1060864K
  class space    used 1530K, capacity 1588K, committed 1664K, reserved 1048576K
}
{Heap before GC invocations=1 (full 0):
 def new generation   total 39296K, used 39296K [0x00000000f8000000, 0x00000000faaa0000, 0x00000000faaa0000)
  eden space 34944K, 100% used [0x00000000f8000000, 0x00000000fa220000, 0x00000000fa220000)
  from space 4352K, 100% used [0x00000000fa660000, 0x00000000faaa0000, 0x00000000faaa0000)
  to   space 4352K,   0% used [0x00000000fa220000, 0x00000000fa220000, 0x00000000fa660000)
 tenured generation   total 87424K, used 5400K [0x00000000faaa0000, 0x0000000100000000, 0x0000000100000000)
   the space 87424K,   6% used [0x00000000faaa0000, 0x00000000fafe6290, 0x00000000fafe6400, 0x0000000100000000)
 Metaspace       used 15986K, capacity 16364K, committed 16512K, reserved 1064960K
  class space    used 1811K, capacity 1903K, committed 1920K, reserved 1048576K
362.009: [GC (Allocation Failure) 362.009: [DefNew: 39296K->4351K(39296K), 0.0165744 secs] 44696K->15198K(126720K), 0.0166584 secs] [Times: user=0.02 sys=0.00, real=0.02 secs]

-------------------------------------------------------------------------------
[root@it-was bin]# cat gcutils.sh
#!/bin/sh




# [GC Statistics after WAS started]

# config

#   interval : 3 sec

#   count : 2




echo ""

echo "[GC statistics after WAS is started]"

echo "----------------------------------------"

echo " S0/S1: Survivor 0/1 (KB)"

echo " E    : Eden (KB)"

echo " O    : Old area size (KB)"

echo " P    : Permanent area size (KB)"

echo " YGC  : Young Generation GC Count"

echo " YGCT : Young Generation GC Total Time"

echo " FGC  : Full GC Count"

echo " FGCT : Full GC Total Time"

echo " GCT  : GC Total Time"




echo "----------------------------------------"

echo ""

echo " HostName : " $(hostname)

echo ""

for PID in  `ps -ef | grep java | egrep -v grep | awk -F" " '{print $2}'`

do

echo " WAS PID  : " $PID

echo "----------------------------------------------------------------------------"

jstat -gcutil $PID 1000 30

echo "----------------------------------------------------------------------------"

echo ""

done

echo ""
